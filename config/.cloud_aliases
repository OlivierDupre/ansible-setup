# The next line updates PATH for the Google Cloud SDK.
if [ -f ~/google-cloud-sdk/path.bash.inc ]; then source ~/google-cloud-sdk/path.bash.inc; fi

# The next line enables shell command completion for gcloud.
if [ -f ~/google-cloud-sdk/completion.bash.inc ]; then source ~/google-cloud-sdk/completion.bash.inc; fi

local_path=`which aws_completer`
complete -C '${local_path}' aws;

alias startEnv='gcloud compute instances start ${INSTANCE_NAME} --zone ${GCP_ZONE}  --project=${PROJECT_NAME}'
alias descEnv='gcloud compute instances describe ${INSTANCE_NAME}  --zone ${GCP_ZONE} --project=${PROJECT_NAME}'
alias stopEnv='gcloud compute instances stop ${INSTANCE_NAME} --zone ${GCP_ZONE} --project=${PROJECT_NAME}'

function sshEnv() {
    ping -c1 -W1 ${INSTANCE_IP}
    if [ "$?" != "0" ]
    then
        echo "Starting env"
        startEnv
    fi

    ssh-tmux -i ~/.ssh/id_rsa  olivier.dupre@${INSTANCE_IP}
    stopEnv
}