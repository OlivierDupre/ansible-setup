---
- hosts: master
  tasks:
  - name: Install Kubernetes Dashboard
    # https://kubernetes.io/docs/concepts/cluster-administration/addons/#visualization-amp-control
    # https://github.com/kubernetes/dashboard#kubernetes-dashboard
    shell: |
      kubectl apply -f "{{ playbook_dir }}/k8s/kubernetes-dashboard.yaml" ;
      kubectl apply -f "{{ playbook_dir }}/k8s/dashboard-admin-user.yaml" ;
      nohup kubectl proxy &
      exit 0
      # Run
      # * kubectl proxy
      # Navigate to:
      # * http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/
      # Use:
      # * Token value output with following command:
      # * kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}') 